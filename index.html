<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 转专转 转转 -SEO -->
    <title>拽拽住  砖拽 转驻拽 |  专专&quot;驻 </title>
    
    <!-- 注转 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 注转 驻 ALEF -Inter (驻) -->
    <link href="https://fonts.googleapis.com/css2?family=Alef:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* 专转 驻 专砖 - 爪转 砖砖 -Alef */
        body {
            font-family: 'Alef', Inter, sans-serif;
            direction: rtl;
            text-align: right;
        }
    </style>
</head>

<!-- 专拽注 专,  驻专爪'/ - Stone-100 -->
<body class="bg-stone-100 text-gray-900 p-4 md:p-10">

    <div class="max-w-4xl mx-auto">
        
        <!-- 转专转 专砖转 注专  -->
        <header class="mb-10 p-4 bg-stone-200 shadow-lg border-b-4 border-amber-900 rounded-sm">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <!-- H1: 爪注  注拽 (Sepia) -->
                <h1 class="text-4xl md:text-5xl font-extrabold text-amber-900">专  拽拽住</h1>
                
                <!-- 驻转专 注专   -->
                <a href="codex.html" class="inline-block px-6 py-3 bg-red-800 text-white text-lg font-bold rounded-sm shadow-md hover:bg-red-900 transition duration-300 transform hover:scale-[1.01] whitespace-nowrap">
                     注专  
                </a>
            </div>
        </header>

        <!-- 拽 注 注 驻专拽 -->
        <section class="mb-10 p-6 bg-white border-2 border-amber-700 rounded-sm shadow-lg text-lg">
            <h2 class="text-2xl font-bold text-amber-900 mb-3"> 拽拽住?</h2>
            <p class="text-gray-700 leading-relaxed mb-3">
                拽拽住   注专 拽祝  注 砖拽 转驻拽 砖 (专专&quot;驻 - Role-Playing Games).  注 砖砖  注专  砖拽 , 砖 转拽 , 注 注拽 转 转 砖驻 拽爪注转 砖 转.
            </p>
            <p class="text-gray-800 font-semibold mt-4">
                 注砖, 拽拽住  <span id="term-count" class="text-red-700 text-2xl font-extrabold">0</span>  转专 驻专.
            </p>
        </section>

        <!-- 拽 驻砖 专 -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-amber-900 mb-4 border-b border-amber-900 pb-2">驻砖 专</h2>
            
            <input type="text" id="home-search-input" placeholder="驻砖  注专转  转 (: , DM, )..."
                   class="w-full p-4 border-2 border-amber-900 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-amber-700 transition duration-150 rounded-sm">
            
            <!-- 拽住  砖转 驻 爪 驻砖 -->
            <p id="search-status" class="text-sm text-gray-600 mt-2">拽  注专转  转  驻砖 拽拽住.</p>
        </section>

        <!-- 专 转爪转 驻砖 -->
        <!-- 住专 转 gap-6  砖专住  爪  -->
        <section id="results-container" class="grid grid-cols-1 mb-10">
            <!-- 转爪转 驻砖 爪  -->
        </section>

    </div>
    
    <!-- --- 驻专 - 专 住 --- -->
    <footer class="mt-12 pt-4 border-t-2 border-amber-900 bg-stone-200 text-center text-sm p-4 rounded-t-sm space-y-1 max-w-4xl mx-auto">
        <p class="text-amber-900">
             注" <a href="https://rrpg.top" target="_blank" class="font-bold text-amber-700 hover:text-amber-900 underline transition"> - 砖拽 转驻拽 注 拽</a>
        </p>
        <p class="text-amber-900">
            驻转 注" <a href="https://lp.reuven.click" target="_blank" class="font-bold text-amber-700 hover:text-amber-900 underline transition">专 抓'</a>
        </p>
    </footer>

    <!-- JavaScript  驻砖 拽砖专 -->
    <!-- 住驻 type="module"  驻砖专  拽抓 爪 terms.js -->
    <script type="module">
        // ---  转  转 拽抓 terms.js ---
        import { dictionaryData } from './terms.js';

        // --- 拽注 砖转  ---
        const searchInput = document.getElementById('home-search-input');
        const resultsContainer = document.getElementById('results-container');
        const searchStatus = document.getElementById('search-status');
        const termCountElement = document.getElementById('term-count');
        
        const MAX_PREVIEW_LENGTH = 100;
        
        // --- 驻拽爪转 注专 ---
        function encodeWord(word) {
            return encodeURIComponent(word);
        }
        
        function truncateText(text, maxLength = MAX_PREVIEW_LENGTH) {
            if (text.length <= maxLength) {
                return text;
            }
            return text.substring(0, maxLength).trim() + '...';
        }

        /**
         *  转 拽 -HTML 砖 拽 转爪转 驻砖.
         */
        function createResultCardHtml(item) {
            const encodedWord = encodeWord(item.word);
            const definitionPreview = truncateText(item.definition);

            // 拽   拽砖专 砖 祝  注 -hash 转.
            return `
                <a href="codex.html#${encodedWord}" 
                   class="p-4 bg-white border border-amber-800 rounded-sm shadow-sm cursor-pointer 
                          flex justify-between items-start transition-all duration-200 hover:bg-amber-100" 
                   title="抓 驻专  注  ${item.word}">
                    
                    <!-- 爪 : 注专转 + 转 -->
                    <div class="text-right flex-grow pr-4">
                        <h3 class="text-2xl font-extrabold text-amber-900 mb-1">${item.word}</h3>
                        <p class="text-sm text-gray-600 font-medium">${item.sourceEn}</p>
                    </div>

                    <!-- 爪 砖: 转拽爪专 驻专砖 -->
                    <div class="text-right w-2/3 pl-2">
                        <p class="text-gray-700 text-base leading-snug">${definitionPreview}</p>
                    </div>
                </a>
            `;
        }
        
        /**
         * 驻注 转 驻砖 爪 转爪转.
         *  驻 转: 拽 > 转 > .  -5 转爪转.
         */
        function applySearch() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const MAX_RESULTS = 5; //  -5 转爪转

            //  砖转砖  拽 住驻拽, 拽 转 转爪转
            if (searchTerm.length < 2) {
                resultsContainer.innerHTML = '';
                searchStatus.textContent = '拽 驻转 2 转转  转 驻砖...';
                return;
            }

            const scoredData = dictionaryData.map(item => {
                const wordLower = item.word.toLowerCase();
                const sourceEnLower = item.sourceEn.toLowerCase();
                let score = 0;

                // 1. 爪 3: 转 拽转 (注专转  转) -  砖
                if (wordLower === searchTerm || sourceEnLower === searchTerm) {
                    score = 3;
                }
                // 2. 爪 2: 转 转转 (注专转  转)
                else if (wordLower.startsWith(searchTerm) || sourceEnLower.startsWith(searchTerm)) {
                    score = 2;
                }
                // 3. 爪 1:  拽转  (注专转  转)
                else if (wordLower.includes(searchTerm) || sourceEnLower.includes(searchTerm)) {
                    score = 1;
                }
                // 4. 爪 0.5:  拽转 专 (驻专砖)
                else if (item.definition.toLowerCase().includes(searchTerm)) {
                    score = 0.5;
                }

                return { ...item, score };
            });

            // 住,  驻 爪 ( ) 
            const filteredAndSortedData = scoredData
                .filter(item => item.score > 0) // 住 爪 转  砖 爪 
                .sort((a, b) => b.score - a.score) //  爪  
                .slice(0, MAX_RESULTS); //  -5 转爪转 专砖转

            renderResults(filteredAndSortedData);
        }

        /**
         * 专专 转 转爪转 转 .
         */
        function renderResults(data) {
            resultsContainer.innerHTML = data.map(createResultCardHtml).join('');

            if (data.length === 0) {
                searchStatus.textContent = `  爪  转 驻砖 "${searchInput.value}".`;
            } else {
                searchStatus.textContent = `爪 ${data.length}  专 转专 (转 注 5). 抓 注 专住 驻专 :`;
            }
        }

        /**
         * 驻拽爪转 转
         */
        window.onload = function () {
            // 注  
            termCountElement.textContent = dictionaryData.length;

            //  专注 拽
            searchInput.addEventListener('input', applySearch);
            
            // **砖:**  专专 转  转爪转 注转 祝, 专拽 爪 注转 .
            resultsContainer.innerHTML = '';
            searchStatus.textContent = '拽  注专转  转  驻砖 拽拽住.';
        };
    </script>
</body>
</html>
